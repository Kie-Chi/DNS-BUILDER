{
    "_std": {
        "monitor": {
            "cap_add": [
                "NET_ADMIN",
                "NET_RAW"
            ],
            "network_mode": "host",
            "environment": {
                "ENABLE_PROMETHEUS_EXPORTER": "true"
            },
            "expose": [
                "53",
                "9153"
            ]
        }
    },
    "bind": {
        "recursor": {
            "command": [
                "named",
                "-g",
                "-c",
                "/usr/local/etc/named.conf"
            ],
            "volumes": [
                "resource:bind_recursor_base.conf:/usr/local/etc/named.conf"
            ]
        },
        "auth": {
            "command": [
                "named",
                "-g",
                "-c",
                "/usr/local/etc/named.conf"
            ],
            "volumes": [
                "resource:bind_auth_base.conf:/usr/local/etc/named.conf"
            ]
        },
        "forwarder": {
            "command": [
                "named",
                "-g",
                "-c",
                "/usr/local/etc/named.conf"
            ],
            "volumes": [
                "resource:bind_forwarder_base.conf:/usr/local/etc/named.conf"
            ]
        }
    },
    "unbound": {
        "recursor": {
            "volumes": [
                "resource:unbound_recursor_base.conf:/usr/local/etc/unbound/unbound.conf"
            ]
        },
        "forwarder": {
            "volumes": [
                "resource:unbound_forwarder_base.conf:/usr/local/etc/unbound/unbound.conf"
            ]
        }
    },
    "monitor": {
        "influxdb": {
            "build": false,
            "image": "tutum/influxdb",
            "restart": "always",
            "environment": [
                "PRE_CREATE_DB=monitor"
            ],
            "ports": [
                "8083:8083",
                "8086:8086"
            ],
            "mounts": [
                "./data/influxdb:/data"
            ]
        },
        "cadvisor": {
            "build": false,
            "image": "google/cadvisor",
            "links": [
                "influxdb:influxsrv"
            ],
            "command": [
                "storage_driver=influxdb",
                "storage_driver_db=monitor",
                "storage_driver_host=influxsrv:8086"
            ],
            "restart": "always",
            "ports": [
                "8080:8080"
            ],
            "mounts": [
                "/:/rootfs:ro",
                "/var/run:/var/run:rw",
                "/sys:/sys:ro",
                "/var/lib/docker/:/var/lib/docker:ro"
            ]
        },
        "grafana": {
            "build": false,
            "image": "grafana/grafana",
            "user": "104",
            "restart": "always",
            "links": [
                "influxdb:influxsrv"
            ],
            "ports": [
                "3000:3000"
            ],
            "mounts": [
                "grafana_data:/var/lib/grafana"
            ],
            "environment": {
                "HTTP_USER": "root",
                "HTTP_PASS": "root",
                "INFLUXDB_HOST": "influxsrv",
                "INFLUXDB_PORT": "8086"
            }
        }
    }
}