# Dockerfile for {name} (JudasDNS v{version})
# Auto-generated by DNS Builder

FROM {base_image}

ENV DEBIAN_FRONTEND=noninteractive

# Update sources for archived Debian "Buster"
RUN sed -i 's/deb.debian.org/archive.debian.org/g' /etc/apt/sources.list && \
    sed -i 's/security.debian.org/archive.debian.org/g' /etc/apt/sources.list && \
    sed -i '/buster-updates/d' /etc/apt/sources.list

# Install dependencies
RUN apt-get update && apt-get install -y --no-install-recommends {dep_packages}

# Clone the JudasDNS repository from GitHub
RUN git clone https://github.com/mandatoryprogrammer/JudasDNS.git /usr/src/judasdns

# Set the working directory
WORKDIR /usr/src/judasdns

# Install app dependencies
RUN npm install

# Install utils
RUN apt-get update && apt-get install -y --no-install-recommends {util_packages}

# Expose the default DNS port
EXPOSE 53/udp
EXPOSE 2248/udp

# Define the command to run the app
# CMD [ "node", "judasdns.js" ]